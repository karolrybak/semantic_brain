{
  "version": "0.0.102",
  "files": [
    {
      "filename": "src/App.vue",
      "content": "<template>\n  <div class=\"relative w-full h-screen bg-[#19191d] overflow-hidden\">\n    <div class=\"absolute inset-0 z-0\">\n        <CodeGraph \n          ref=\"codeGraphRef\"\n          :data=\"graphData\" \n          :selected-node-id=\"selectedNode?.id\"\n          :thinking-node-id=\"thinkingNodeId\"\n          @select=\"onNodeSelect\" \n        />\n    </div>\n\n    <!-- Left Sidebar (Appears after start) -->\n    <div v-if=\"graphData.nodes.length > 0\" class=\"absolute top-4 left-4 z-20 pointer-events-none flex flex-col gap-2\">\n       <div class=\"pointer-events-auto\">\n         <GraphExplorer \n            :data=\"graphData\" \n            :selected-node=\"selectedNode\" \n            :thinking-node-id=\"thinkingNodeId\"\n            @select=\"onNodeSelect\" \n            @add-node=\"addNewNode\"\n            @accept-node=\"acceptNode\"\n            @forbid-node=\"forbidNode\"\n            @delete-node=\"deleteNode\"\n         />\n       </div>\n       <div class=\"pointer-events-auto flex items-center gap-2\">\n         <button @click=\"promptNewIndependentNode\" class=\"w-10 h-10 bg-indigo-600 hover:bg-indigo-500 text-white rounded-full shadow-lg flex items-center justify-center transition-transform hover:scale-110\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\"></line><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line></svg></button>\n         <label class=\"flex items-center gap-2 bg-zinc-900/90 border border-zinc-800 rounded-full px-3 py-1.5 cursor-pointer shadow-lg hover:bg-zinc-800 transition-colors\">\n            <input type=\"checkbox\" :checked=\"graphData.settings?.autoExplore\" @change=\"(e: any) => toggleAutoExplore(e.target.checked)\" class=\"w-4 h-4 accent-indigo-500\" />\n            <span class=\"text-[10px] font-bold text-zinc-400 uppercase tracking-tighter\">Auto-Explore</span>\n         </label>\n       </div>\n    </div>\n\n    <!-- Top Center Aspect Bar -->\n    <div v-if=\"graphData.nodes.length > 0\" class=\"absolute top-6 left-1/2 -translate-x-1/2 z-30 pointer-events-none\">\n       <div class=\"pointer-events-auto\">\n         <AspectBar \n            :defined-aspects=\"graphData.settings?.definedAspects || []\"\n            :active-aspects=\"graphData.settings?.activeAspects || []\"\n         />\n       </div>\n    </div>\n\n    <!-- Config Button -->\n    <div v-if=\"graphData.nodes.length > 0\" class=\"absolute top-4 right-4 z-30\">\n      <button @click=\"showConfig = !showConfig\" class=\"p-2 bg-zinc-900/80 border border-zinc-800 rounded-lg text-zinc-400 hover:text-white\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z\"></path><circle cx=\"12\" cy=\"12\" r=\"3\"></circle></svg></button>\n      <div v-if=\"showConfig\" class=\"absolute top-full right-0 mt-2\"><ConfigPanel :settings=\"graphData.settings\" /></div>\n    </div>\n\n    <!-- Onboarding Flow -->\n    <div v-if=\"isConnected && graphData.nodes.length === 0\" class=\"absolute inset-0 z-[100] bg-black/40 backdrop-blur-md flex items-center justify-center\">\n       <InitialOnboarding :ws=\"ws\" @start=\"handleOnboardingComplete\" />\n    </div>\n\n    <!-- Offline Overlay -->\n    <div v-if=\"!isConnected\" class=\"absolute inset-0 z-[110] bg-black/60 backdrop-blur flex items-center justify-center\">\n      <div class=\"bg-zinc-900 border border-zinc-800 p-6 rounded-xl flex flex-col items-center gap-4\">\n        <div class=\"w-10 h-10 border-4 border-t-indigo-500 border-zinc-800 rounded-full animate-spin\"></div>\n        <p class=\"text-white font-bold\">Brain Engine Offline</p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted } from 'vue'\nimport CodeGraph from './components/CodeGraph.vue'\nimport GraphExplorer from './components/GraphExplorer.vue'\nimport ConfigPanel from './components/ConfigPanel.vue'\nimport AspectBar from './components/AspectBar.vue'\nimport InitialOnboarding from './components/InitialOnboarding.vue'\nimport type { GraphData, GraphNode } from './types/graph'\n\nconst codeGraphRef = ref<InstanceType<typeof CodeGraph> | null>(null)\nconst selectedNode = ref<GraphNode | null>(null)\nconst thinkingNodeId = ref<string | null>(null)\nconst graphData = ref<any>({ nodes: [], links: [], settings: {} })\nconst ws = ref<WebSocket | null>(null)\nconst isConnected = ref(false)\nconst showConfig = ref(false)\n\nfunction connectWS() {\n  const host = window.location.hostname || 'localhost';\n  ws.value = new WebSocket(`ws://${host}:3001`)\n  ws.value.onopen = () => isConnected.value = true\n  ws.value.onclose = () => { isConnected.value = false; setTimeout(connectWS, 3000) }\n  ws.value.onmessage = (event) => {\n    const data = JSON.parse(event.data)\n    if (data.type === 'FULL_STATE') {\n      graphData.value = { nodes: Object.values(data.state.nodes), links: data.state.links, settings: data.state.settings }\n      thinkingNodeId.value = data.state.thinkingNodeId\n    } else if (data.type === 'PATCH') {\n      applyPatchToLocalGraph(data.patches)\n    }\n  }\n}\n\nfunction applyPatchToLocalGraph(patches: any[]) {\n  patches.forEach(patch => {\n    if (patch.op === 'add' && patch.path.startsWith('/nodes/')) graphData.value.nodes.push(patch.value);\n    else if (patch.op === 'add' && patch.path === '/links/-') graphData.value.links.push(patch.value);\n    else if (patch.op === 'remove' && patch.path.startsWith('/nodes/')) {\n      const id = patch.path.split('/')[2];\n      graphData.value.nodes = graphData.value.nodes.filter((n:any) => n.id !== id);\n    }\n    else if (patch.op === 'replace' && patch.path === '/links') graphData.value.links = patch.value;\n    else if (patch.op === 'replace' && patch.path === '/thinkingNodeId') thinkingNodeId.value = patch.value;\n    else if (patch.op === 'replace' && patch.path === '/settings') graphData.value.settings = patch.value;\n    else if (patch.op === 'replace' && patch.path.endsWith('/status')) {\n        const id = patch.path.split('/')[2];\n        const node = graphData.value.nodes.find((n:any) => n.id === id);\n        if (node) node.status = patch.value;\n    }\n  });\n  graphData.value = { ...graphData.value };\n}\n\nfunction handleOnboardingComplete(payload: { label: string, aspects: string[] }) {\n  if (ws.value?.readyState === WebSocket.OPEN) {\n    ws.value.send(JSON.stringify({ \n      type: 'UPDATE_SETTINGS', \n      settings: { ...graphData.value.settings, definedAspects: payload.aspects, activeAspects: payload.aspects.slice(0, 3) } \n    }))\n    ws.value.send(JSON.stringify({ type: 'ADD_NODE', label: payload.label }))\n  }\n}\n\nfunction onNodeSelect(node: GraphNode | null) {\n  selectedNode.value = node\n  if (node && ws.value?.readyState === WebSocket.OPEN) {\n     ws.value.send(JSON.stringify({ type: 'SET_FOCUS', nodeId: node.id }))\n     codeGraphRef.value?.focusNode(node.id)\n  }\n}\n\nfunction addNewNode(p: any) { ws.value?.send(JSON.stringify({ type: 'ADD_NODE', ...p })) }\nfunction acceptNode(nodeId: string) { ws.value?.send(JSON.stringify({ type: 'ACCEPT_NODE', nodeId })) }\nfunction forbidNode(nodeId: string) { ws.value?.send(JSON.stringify({ type: 'FORBID_NODE', nodeId })) }\nfunction deleteNode(nodeId: string) { ws.value?.send(JSON.stringify({ type: 'DELETE_NODE', nodeId })); selectedNode.value = null }\nfunction toggleAutoExplore(val: boolean) { ws.value?.send(JSON.stringify({ type: 'UPDATE_SETTINGS', settings: { ...graphData.value.settings, autoExplore: val } })) }\nfunction promptNewIndependentNode() { const label = prompt('New independent concept:'); if (label) addNewNode({ label }) }\n\nonMounted(() => {\n  connectWS()\n  window.addEventListener('update-settings', (e: any) => {\n    const updatedSettings = { ...graphData.value.settings, ...e.detail };\n    ws.value?.send(JSON.stringify({ type: 'UPDATE_SETTINGS', settings: updatedSettings }));\n  })\n  window.addEventListener('clear-graph', () => ws.value?.send(JSON.stringify({ type: 'CLEAR_GRAPH' })))\n})\n</script>"
    },
    {
      "filename": "src/components/AspectBar.vue",
      "content": "<template>\n  <div class=\"flex items-center gap-2 p-1 bg-zinc-900/40 backdrop-blur rounded-full border border-zinc-800 shadow-lg\">\n    <div class=\"flex gap-1 px-2\">\n      <div \n        v-for=\"aspect in definedAspects\" \n        :key=\"aspect\"\n        @click=\"toggleAspect(aspect)\"\n        class=\"px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider cursor-pointer transition-all border\"\n        :class=\"isActive(aspect) \n          ? 'bg-indigo-600 border-indigo-500 text-white shadow-[0_0_10px_rgba(79,70,229,0.4)]' \n          : 'bg-zinc-800 border-zinc-700 text-zinc-500 hover:text-zinc-300'\"\n      >\n        {{ aspect }}\n      </div>\n    </div>\n    \n    <div class=\"h-4 w-px bg-zinc-800 mx-1\"></div>\n\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from 'vue';\n\nconst props = defineProps<{\n  definedAspects: string[],\n  activeAspects: string[]\n}>();\n\nconst newAspect = ref('');\n\nfunction isActive(a: string) {\n  return props.activeAspects.includes(a);\n}\n\nfunction toggleAspect(a: string) {\n  let next = [...props.activeAspects];\n  if (isActive(a)) next = next.filter(i => i !== a);\n  else next.push(a);\n  \n  window.dispatchEvent(new CustomEvent('update-settings', { \n    detail: { activeAspects: next } \n  }));\n}\n</script>"
    },
    {
      "filename": "src/components/CodeGraph.vue",
      "content": "<template>\n  <div \n    ref=\"container\" \n    class=\"w-full h-full\" \n    @contextmenu.prevent \n    @mousedown=\"onContainerMouseDown\"\n  ></div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted, onBeforeUnmount, watch } from 'vue'\nimport * as THREE from 'three'\nimport ForceGraph3D from '3d-force-graph'\nimport type { GraphData, GraphNode } from '../types/graph'\nimport { useGraphConfigStore } from '../stores/graphConfig'\n\nconst props = defineProps<{\n  data: GraphData\n  selectedNodeId?: string\n  thinkingNodeId?: string | null\n}>()\n\nconst emit = defineEmits<{ (e: 'select', node: GraphNode | null): void }>()\n\nconst container = ref<HTMLElement | null>(null)\nconst config = useGraphConfigStore()\nlet graph: any = null\nlet resizeObserver: ResizeObserver | null = null\nconst draggedNode = ref<GraphNode | null>(null)\nlet animationFrameId: number | null = null\n\nonMounted(() => {\n  if (container.value) {\n    initGraph()\n    if (props.data) updateGraph(props.data)\n    resizeObserver = new ResizeObserver(() => {\n      if (graph && container.value) {\n        graph.width(container.value.clientWidth)\n        graph.height(container.value.clientHeight)\n      }\n    })\n    resizeObserver.observe(container.value)\n    animate()\n  }\n})\n\nonBeforeUnmount(() => {\n  if (resizeObserver) resizeObserver.disconnect()\n  if (graph) graph._destructor()\n  if (animationFrameId) cancelAnimationFrame(animationFrameId)\n})\n\nwatch(() => props.data, (newData) => {\n  if (graph) updateGraph(newData)\n}, { deep: true })\n\nwatch(\n  () => [config.nodeRelSize, config.linkWidth, config.linkOpacity, config.linkDirectionalParticles, config.chargeStrength],\n  () => { if (graph) applyConfig() }\n)\n\nwatch(() => [props.selectedNodeId, props.thinkingNodeId], () => {\n    if (graph) setupGeometries()\n})\n\nfunction animate() {\n  if (props.thinkingNodeId && graph) {\n    const { nodes } = graph.graphData()\n    const node = nodes.find((n: any) => n.id === props.thinkingNodeId)\n    if (node && node.__threeObj) {\n      node.__threeObj.rotation.y += 0.05\n      node.__threeObj.rotation.x += 0.02\n    }\n  }\n  animationFrameId = requestAnimationFrame(animate)\n}\n\nfunction getHealthColor(node: GraphNode) {\n  if (node.status === 'forbidden') return '#450a0a'\n  if (props.thinkingNodeId === node.id) return '#22c55e'\n  if (node.type === 'root') return '#f43f5e'\n  if (node.status === 'accepted') return '#3b82f6'\n  return '#71717a'\n}\n\nfunction initGraph() {\n  graph = ForceGraph3D()(container.value!)\n    .nodeLabel(null)\n    .onNodeClick((node: any) => emit('select', node))\n    .onNodeDrag((node: any) => draggedNode.value = node)\n    .onNodeDragEnd((node: any) => {\n        if (node.isLocked) { node.fx = node.x; node.fy = node.y; node.fz = node.z }\n        else { node.fx = null; node.fy = null; node.fz = null }\n        draggedNode.value = null\n    })\n\n  applyConfig()\n  setupGeometries()\n}\n\nfunction applyConfig() {\n  graph\n    .backgroundColor('#19191d')\n    .nodeRelSize(config.nodeRelSize)\n    .linkWidth(config.linkWidth)\n    .linkOpacity(config.linkOpacity)\n    .linkDirectionalParticles(config.linkDirectionalParticles)\n    .linkDirectionalParticleSpeed(0.005)\n    .linkCurvature(0.1)\n    .showNavInfo(false)\n\n  graph.d3Force('charge').strength(config.chargeStrength)\n}\n\nfunction createTextSprite(text: string, isLabel = true) {\n  const canvas = document.createElement('canvas');\n  const context = canvas.getContext('2d');\n  if (!context) return new THREE.Object3D();\n\n  const fontSize = isLabel ? 42 : 24;\n  context.font = `bold ${fontSize}px Inter, Arial`;\n  const metrics = context.measureText(text);\n  const textWidth = metrics.width;\n  \n  canvas.width = textWidth + 40;\n  canvas.height = fontSize + 40;\n\n  context.fillStyle = isLabel ? 'rgba(10, 10, 15, 0.9)' : 'rgba(25, 25, 30, 0.7)';\n  context.beginPath();\n  context.roundRect(0, 0, canvas.width, canvas.height, 8);\n  context.fill();\n\n  context.font = `bold ${fontSize}px Inter, Arial`;\n  context.textAlign = 'center';\n  context.textBaseline = 'middle';\n  context.fillStyle = isLabel ? '#ffffff' : '#888888';\n  context.fillText(text, canvas.width / 2, canvas.height / 2);\n\n  const texture = new THREE.CanvasTexture(canvas);\n  const material = new THREE.SpriteMaterial({ map: texture, depthTest: false, transparent: true });\n  const sprite = new THREE.Sprite(material);\n  const scaleFactor = isLabel ? 50 : 80;\n  sprite.scale.set(canvas.width / scaleFactor, canvas.height / scaleFactor, 1);\n  return sprite;\n}\n\nfunction setupGeometries() {\n  graph\n    .nodeThreeObject((node: any) => {\n        const group = new THREE.Group();\n        const size = (node.val || 2) * config.nodeRelSize;\n        let geometry;\n        if (props.thinkingNodeId === node.id) geometry = new THREE.OctahedronGeometry(size * 1.5, 0);\n        else if (node.type === 'root') geometry = new THREE.IcosahedronGeometry(size, 0);\n        else geometry = new THREE.SphereGeometry(size, 16, 16);\n\n        let opacity = node.status === 'proposed' ? 0.4 : 0.9;\n        const active = props.data.settings?.activeAspects || [];\n        if (active.length > 0) {\n           let sum = 0;\n           active.forEach(a => sum += (node.aspects?.[a] || 0));\n           const avg = sum / Math.max(1, active.length);\n           opacity = Math.max(0.1, avg);\n        }\n\n        const material = new THREE.MeshLambertMaterial({ color: getHealthColor(node), transparent: true, opacity });\n        const mesh = new THREE.Mesh(geometry, material);\n        mesh.name = 'node-mesh';\n        group.add(mesh);\n\n        const label = createTextSprite(node.label || node.id, true);\n        label.position.y = size + 2;\n        label.name = 'node-label';\n        group.add(label);\n        return group;\n    })\n    .nodeThreeObjectExtend(false)\n    .linkThreeObjectExtend(true)\n    .linkThreeObject((link: any) => {\n        if (!link.relationType) return null;\n        return createTextSprite(link.relationType, false);\n    })\n    .linkPositionUpdate((sprite: any, { start, end }: any) => {\n        const middlePos = Object.assign({}, ...['x', 'y', 'z'].map(c => ({\n          [c]: start[c] + (end[c] - start[c]) / 2\n        })));\n        Object.assign(sprite.position, middlePos);\n    });\n}\n\nfunction updateGraph(data: GraphData) {\n  const currentGraphData = graph.graphData();\n  const existingNodes = new Map(currentGraphData.nodes.map((n: any) => [n.id, n]));\n  const nodes = data.nodes.map(n => {\n    const existing = existingNodes.get(n.id);\n    if (existing) {\n      const { x, y, z, fx, fy, fz, vx, vy, vz, __threeObj, neighbors, links, ...serializable } = n;\n      Object.assign(existing, serializable);\n      return existing;\n    }\n    return { ...n };\n  });\n  graph.graphData({ nodes, links: data.links.map(l => ({ ...l })) });\n}\n\nfunction focusNode(id: string) {\n  const { nodes } = graph.graphData();\n  const node = nodes.find((n: any) => n.id === id);\n  if (node) {\n    const distance = 80;\n    graph.cameraPosition({ x: node.x, y: node.y, z: node.z + distance }, node, 1500);\n  }\n}\n\nfunction onContainerMouseDown(e: MouseEvent) { if (e.button === 2 && draggedNode.value) toggleLock(draggedNode.value) }\nfunction toggleLock(node: any) {\n  node.isLocked = !node.isLocked\n  if (node.isLocked) { node.fx = node.x; node.fy = node.y; node.fz = node.z }\n  else { node.fx = null; node.fy = null; node.fz = null }\n}\ndefineExpose({ focusNode })\n</script>\n"
    },
    {
      "filename": "src/components/ConceptGraph.vue",
      "content": "<template>\n  <div \n    ref=\"container\" \n    class=\"w-full h-full\" \n    @contextmenu.prevent \n    @mousedown=\"onContainerMouseDown\"\n  ></div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted, onBeforeUnmount, watch } from 'vue'\nimport * as THREE from 'three'\nimport ForceGraph3D from '3d-force-graph'\nimport type { GraphData, GraphNode } from '../types/graph'\nimport { useGraphConfigStore } from '../stores/graphConfig'\n\nconst props = defineProps<{\n  data: GraphData\n  selectedNodeId?: string\n  thinkingNodeId?: string | null\n}>()\n\nconst emit = defineEmits<{ (e: 'select', node: GraphNode | null): void }>()\n\nconst container = ref<HTMLElement | null>(null)\nconst config = useGraphConfigStore()\nlet graph: any = null\nlet resizeObserver: ResizeObserver | null = null\nconst draggedNode = ref<GraphNode | null>(null)\nlet animationFrameId: number | null = null\n\nonMounted(() => {\n  if (container.value) {\n    initGraph()\n    if (props.data) updateGraph(props.data)\n    resizeObserver = new ResizeObserver(() => {\n      if (graph && container.value) {\n        graph.width(container.value.clientWidth)\n        graph.height(container.value.clientHeight)\n      }\n    })\n    resizeObserver.observe(container.value)\n    animate()\n  }\n})\n\nonBeforeUnmount(() => {\n  if (resizeObserver) resizeObserver.disconnect()\n  if (graph) graph._destructor()\n  if (animationFrameId) cancelAnimationFrame(animationFrameId)\n})\n\nwatch(() => props.data, (newData) => {\n  if (graph) updateGraph(newData)\n}, { deep: true })\n\nwatch(\n  () => [config.nodeRelSize, config.linkWidth, config.linkOpacity, config.linkDirectionalParticles, config.chargeStrength],\n  () => { if (graph) applyConfig() }\n)\n\nwatch(() => [props.selectedNodeId, props.thinkingNodeId], () => {\n    if (graph) setupGeometries()\n})\n\nfunction animate() {\n  if (props.thinkingNodeId && graph) {\n    const { nodes } = graph.graphData()\n    const node = nodes.find((n: any) => n.id === props.thinkingNodeId)\n    if (node && node.__threeObj) {\n      node.__threeObj.rotation.y += 0.05\n      node.__threeObj.rotation.x += 0.02\n    }\n  }\n  animationFrameId = requestAnimationFrame(animate)\n}\n\nfunction getHealthColor(node: GraphNode) {\n  if (node.status === 'forbidden') return '#450a0a'\n  if (props.thinkingNodeId === node.id) return '#22c55e'\n  if (node.type === 'root') return '#f43f5e'\n  if (node.status === 'accepted') return '#3b82f6'\n  return '#71717a'\n}\n\nfunction initGraph() {\n  graph = ForceGraph3D()(container.value!)\n    .nodeLabel(null)\n    .onNodeClick((node: any) => emit('select', node))\n    .onNodeDrag((node: any) => draggedNode.value = node)\n    .onNodeDragEnd((node: any) => {\n        if (node.isLocked) { node.fx = node.x; node.fy = node.y; node.fz = node.z }\n        else { node.fx = null; node.fy = null; node.fz = null }\n        draggedNode.value = null\n    })\n\n  applyConfig()\n  setupGeometries()\n}\n\nfunction applyConfig() {\n  graph\n    .backgroundColor('#19191d')\n    .nodeRelSize(config.nodeRelSize)\n    .linkWidth(config.linkWidth)\n    .linkOpacity(config.linkOpacity)\n    .linkDirectionalParticles(config.linkDirectionalParticles)\n    .linkDirectionalParticleSpeed(0.005)\n    .linkCurvature(0.1)\n    .showNavInfo(false)\n\n  graph.d3Force('charge').strength(config.chargeStrength)\n}\n\nfunction createTextSprite(text: string, isLabel = true) {\n  const canvas = document.createElement('canvas');\n  const context = canvas.getContext('2d');\n  if (!context) return new THREE.Object3D();\n\n  const fontSize = isLabel ? 42 : 24;\n  context.font = `bold ${fontSize}px Inter, Arial`;\n  const metrics = context.measureText(text);\n  const textWidth = metrics.width;\n  \n  canvas.width = textWidth + 40;\n  canvas.height = fontSize + 40;\n\n  context.fillStyle = isLabel ? 'rgba(10, 10, 15, 0.9)' : 'rgba(25, 25, 30, 0.7)';\n  context.beginPath();\n  context.roundRect(0, 0, canvas.width, canvas.height, 8);\n  context.fill();\n\n  context.font = `bold ${fontSize}px Inter, Arial`;\n  context.textAlign = 'center';\n  context.textBaseline = 'middle';\n  context.fillStyle = isLabel ? '#ffffff' : '#888888';\n  context.fillText(text, canvas.width / 2, canvas.height / 2);\n\n  const texture = new THREE.CanvasTexture(canvas);\n  const material = new THREE.SpriteMaterial({ map: texture, depthTest: false, transparent: true });\n  const sprite = new THREE.Sprite(material);\n  const scaleFactor = isLabel ? 50 : 80;\n  sprite.scale.set(canvas.width / scaleFactor, canvas.height / scaleFactor, 1);\n  return sprite;\n}\n\nfunction setupGeometries() {\n  graph\n    .nodeThreeObject((node: any) => {\n        const group = new THREE.Group();\n        const size = (node.val || 2) * config.nodeRelSize;\n        let geometry;\n        if (props.thinkingNodeId === node.id) geometry = new THREE.OctahedronGeometry(size * 1.5, 0);\n        else if (node.type === 'root') geometry = new THREE.IcosahedronGeometry(size, 0);\n        else geometry = new THREE.SphereGeometry(size, 16, 16);\n\n        let opacity = node.status === 'proposed' ? 0.4 : 0.9;\n        const active = props.data.settings?.activeAspects || [];\n        if (active.length > 0) {\n           let sum = 0;\n           active.forEach(a => sum += (node.aspects?.[a] || 0));\n           const avg = sum / Math.max(1, active.length);\n           opacity = Math.max(0.1, avg);\n        }\n\n        const material = new THREE.MeshLambertMaterial({ color: getHealthColor(node), transparent: true, opacity });\n        const mesh = new THREE.Mesh(geometry, material);\n        mesh.name = 'node-mesh';\n        group.add(mesh);\n\n        const label = createTextSprite(node.label || node.id, true);\n        label.position.y = size + 2;\n        label.name = 'node-label';\n        group.add(label);\n        return group;\n    })\n    .nodeThreeObjectExtend(false)\n    .linkThreeObjectExtend(true)\n    .linkThreeObject((link: any) => {\n        if (!link.relationType) return null;\n        return createTextSprite(link.relationType, false);\n    })\n    .linkPositionUpdate((sprite: any, { start, end }: any) => {\n        const middlePos = Object.assign({}, ...['x', 'y', 'z'].map(c => ({\n          [c]: start[c] + (end[c] - start[c]) / 2\n        })));\n        Object.assign(sprite.position, middlePos);\n    });\n}\n\nfunction updateGraph(data: GraphData) {\n  const currentGraphData = graph.graphData();\n  const existingNodes = new Map(currentGraphData.nodes.map((n: any) => [n.id, n]));\n  const nodes = data.nodes.map(n => {\n    const existing = existingNodes.get(n.id);\n    if (existing) {\n      const { x, y, z, fx, fy, fz, vx, vy, vz, __threeObj, neighbors, links, ...serializable } = n;\n      Object.assign(existing, serializable);\n      return existing;\n    }\n    return { ...n };\n  });\n  graph.graphData({ nodes, links: data.links.map(l => ({ ...l })) });\n}\n\nfunction focusNode(id: string) {\n  const { nodes } = graph.graphData();\n  const node = nodes.find((n: any) => n.id === id);\n  if (node) {\n    const distance = 80;\n    graph.cameraPosition({ x: node.x, y: node.y, z: node.z + distance }, node, 1500);\n  }\n}\n\nfunction onContainerMouseDown(e: MouseEvent) { if (e.button === 2 && draggedNode.value) toggleLock(draggedNode.value) }\nfunction toggleLock(node: any) {\n  node.isLocked = !node.isLocked\n  if (node.isLocked) { node.fx = node.x; node.fy = node.y; node.fz = node.z }\n  else { node.fx = null; node.fy = null; node.fz = null }\n}\ndefineExpose({ focusNode })\n</script>\n"
    },
    {
      "filename": "src/components/ConfigPanel.vue",
      "content": "<template>\n  <div class=\"bg-zinc-900/95 backdrop-blur border border-zinc-800 rounded-lg p-4 w-72 flex flex-col gap-3 text-xs text-zinc-300 shadow-xl\">\n    <h3 class=\"font-bold text-zinc-400 uppercase tracking-wider mb-1\">Brain Engine Config</h3>\n    \n    <div class=\"space-y-1\">\n      <label class=\"flex justify-between\">AI Creativity <span>{{ stateSettings.creativity }}</span></label>\n      <input type=\"range\" min=\"0\" max=\"1\" step=\"0.1\" v-model.number=\"stateSettings.creativity\" @change=\"updateServerSettings\" class=\"w-full accent-indigo-500\" />\n    </div>\n\n    <div class=\"space-y-1\">\n      <label class=\"flex justify-between\">Min AI Connections <span>{{ stateSettings.minConnections }}</span></label>\n      <input type=\"range\" min=\"1\" max=\"10\" step=\"1\" v-model.number=\"stateSettings.minConnections\" @change=\"updateServerSettings\" class=\"w-full accent-indigo-500\" />\n    </div>\n\n    <h3 class=\"font-bold text-zinc-400 uppercase tracking-wider mt-2 pt-3 border-t border-zinc-800\">Visuals</h3>\n    <div class=\"space-y-1\">\n      <label class=\"flex justify-between text-zinc-500\">Node Scale <span>{{ config.nodeRelSize }}</span></label>\n      <input type=\"range\" min=\"1\" max=\"15\" step=\"0.5\" v-model.number=\"config.nodeRelSize\" class=\"w-full accent-blue-500\" />\n    </div>\n    <div class=\"space-y-1\">\n      <label class=\"flex justify-between text-zinc-500\">Physics <span>{{ config.chargeStrength }}</span></label>\n      <input type=\"range\" min=\"-500\" max=\"-10\" step=\"10\" v-model.number=\"config.chargeStrength\" class=\"w-full accent-blue-500\" />\n    </div>\n\n    <div class=\"pt-2 border-t border-zinc-700/50 flex flex-col gap-2\">\n       <button @click=\"clearGraph\" class=\"w-full py-2 bg-red-950/20 hover:bg-red-900/40 text-red-500 border border-red-900/50 rounded text-[10px] font-bold uppercase transition-all\">Clear All Concepts</button>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { reactive, watch } from 'vue'\nimport { useGraphConfigStore } from '../stores/graphConfig'\nconst props = defineProps<{ settings?: any }>()\nconst config = useGraphConfigStore()\nconst stateSettings = reactive({ creativity: 0.7, minConnections: 3, ...props.settings })\nwatch(() => props.settings, (newVal) => { if (newVal) Object.assign(stateSettings, newVal) }, { deep: true })\nfunction updateServerSettings() { window.dispatchEvent(new CustomEvent('update-settings', { detail: { ...stateSettings } })) }\nfunction clearGraph() { if (confirm('Are you sure?')) window.dispatchEvent(new CustomEvent('clear-graph')) }\n</script>"
    },
    {
      "filename": "src/components/GraphExplorer.vue",
      "content": "<template>\n  <div class=\"flex gap-2 max-h-[90vh] pointer-events-auto items-start\">\n    <div v-if=\"selectedNode\" class=\"w-80 bg-zinc-900/95 backdrop-blur-md border border-zinc-800 rounded-lg p-4 shadow-xl text-zinc-100 flex flex-col overflow-hidden\">\n        <!-- Header -->\n        <div class=\"flex justify-between items-start mb-2\">\n            <div class=\"p-1.5 bg-zinc-800/50 rounded-lg border border-zinc-700/50\">\n                 <NodeIcon :type=\"selectedNode.status === 'proposed' ? 'function' : 'file'\" :color=\"getNodeColor(selectedNode)\" class=\"w-6 h-6\" />\n            </div>\n            <div class=\"flex gap-1\">\n              <button @click=\"$emit('forbid-node', selectedNode.id)\" class=\"p-1.5 rounded transition-colors\" :class=\"selectedNode.status === 'forbidden' ? 'text-red-500 bg-red-950/40' : 'text-zinc-600 hover:text-red-400'\" title=\"Forbid Context\">\n                 <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><line x1=\"4.93\" y1=\"4.93\" x2=\"19.07\" y2=\"19.07\"></line></svg>\n              </button>\n              <button @click=\"$emit('delete-node', selectedNode.id)\" class=\"p-1.5 text-zinc-600 hover:text-red-400 hover:bg-red-950/30 rounded transition-colors\" title=\"Delete Concept\">\n                 <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"3 6 5 6 21 6\"></polyline><path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path></svg>\n              </button>\n              <button @click=\"$emit('select', null)\" class=\"p-1.5 text-zinc-600 hover:text-zinc-400\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line><line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line></svg>\n              </button>\n            </div>\n        </div>\n\n        <div class=\"mb-4\">\n          <h2 class=\"text-xl font-bold text-white break-words leading-tight\">{{ selectedNode.label }}</h2>\n          <div class=\"flex items-center gap-2 mt-1\">\n            <span class=\"text-[9px] uppercase tracking-widest text-zinc-500 font-mono\">{{ selectedNode.status }} {{ selectedNode.type }}</span>\n            <span v-if=\"thinkingNodeId === selectedNode.id\" class=\"text-[9px] text-indigo-400 animate-pulse font-bold uppercase italic\">AI is dreaming...</span>\n          </div>\n        </div>\n\n        <div class=\"flex-1 overflow-y-auto pr-1 custom-scrollbar space-y-4\">\n            <!-- S2.3: Aspect Breakdown -->\n            <div v-if=\"hasAspects\">\n                <h3 class=\"text-[10px] uppercase tracking-wider text-zinc-500 font-bold mb-2 border-b border-zinc-800 pb-1\">Aspect Relevance</h3>\n                <div class=\"space-y-2\">\n                    <div v-for=\"(val, name) in selectedNode.aspects\" :key=\"name\" class=\"flex flex-col gap-1\">\n                        <div class=\"flex justify-between text-[10px] text-zinc-400\">\n                            <span>{{ name }}</span>\n                            <span>{{ (val * 100).toFixed(0) }}%</span>\n                        </div>\n                        <div class=\"h-1 bg-zinc-800 rounded-full overflow-hidden\">\n                            <div class=\"h-full bg-indigo-500 shadow-[0_0_5px_#6366f1]\" :style=\"{ width: (val * 100) + '%' }\"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <!-- Connections -->\n            <div v-if=\"incomingLinks.length > 0\">\n                <h3 class=\"text-[10px] uppercase tracking-wider text-zinc-500 font-bold mb-2 border-b border-zinc-800 pb-1\">Related By</h3>\n                <div class=\"flex flex-col gap-1\">\n                    <div v-for=\"ref in incomingLinks\" :key=\"ref.id\" @click=\"$emit('select', ref.node)\" class=\"cursor-pointer text-xs p-1.5 rounded hover:bg-zinc-800 text-zinc-400 hover:text-zinc-200 truncate border border-transparent hover:border-zinc-700 flex items-center justify-between\">\n                        <div class=\"flex items-center gap-2 truncate\">\n                          <NodeIcon :type=\"ref.node.status === 'proposed' ? 'function' : 'file'\" :color=\"getNodeColor(ref.node)\" class=\"w-2.5 h-2.5\" />\n                          <span class=\"truncate\">{{ ref.node.label }}</span>\n                        </div>\n                        <span class=\"text-[9px] text-zinc-600 italic\">{{ ref.type }}</span>\n                    </div>\n                </div>\n            </div>\n\n            <div v-if=\"outgoingLinks.length > 0\">\n                <h3 class=\"text-[10px] uppercase tracking-wider text-zinc-500 font-bold mb-2 border-b border-zinc-800 pb-1\">Leads To</h3>\n                <div class=\"flex flex-col gap-1\">\n                    <div v-for=\"dep in outgoingLinks\" :key=\"dep.id\" @click=\"$emit('select', dep.node)\" class=\"cursor-pointer text-xs p-1.5 rounded hover:bg-zinc-800 text-zinc-400 hover:text-zinc-200 truncate border border-transparent hover:border-zinc-700 flex items-center justify-between\">\n                        <div class=\"flex items-center gap-2 truncate\">\n                          <NodeIcon :type=\"dep.node.status === 'proposed' ? 'function' : 'file'\" :color=\"getNodeColor(dep.node)\" class=\"w-2.5 h-2.5\" />\n                          <span class=\"truncate\">{{ dep.node.label }}</span>\n                        </div>\n                        <span class=\"text-[9px] text-zinc-600 italic\">{{ dep.type }}</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Actions -->\n        <div class=\"mt-4 pt-4 border-t border-zinc-800 space-y-2\">\n           <div class=\"relative\">\n             <input v-model=\"relatedInput\" @keyup.enter=\"addRelated\" placeholder=\"Add connection...\" class=\"w-full bg-zinc-950 border border-zinc-800 rounded px-3 py-2 text-xs text-white focus:outline-none focus:border-indigo-500\" />\n             <button @click=\"addRelated\" class=\"absolute right-2 top-1.5 text-zinc-500 hover:text-indigo-400\">\n               <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\"></line><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line></svg>\n             </button>\n           </div>\n           <button v-if=\"selectedNode.status === 'proposed'\" @click=\"$emit('accept-node', selectedNode.id)\" class=\"w-full bg-indigo-600 hover:bg-indigo-500 text-white text-xs py-2 rounded font-bold transition-colors shadow-lg\">Accept AI Suggestion</button>\n        </div>\n    </div>\n    <div v-else class=\"w-64 bg-zinc-900/50 backdrop-blur border border-zinc-800/50 p-4 rounded-lg text-center pointer-events-auto\">\n       <p class=\"text-zinc-600 text-xs\">Select a node to navigate the landscape</p>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed } from 'vue'\nimport type { GraphData, GraphNode } from '../types/graph'\nimport NodeIcon from './NodeIcon.vue'\n\nconst props = defineProps<{ data: GraphData, selectedNode: GraphNode | null, thinkingNodeId: string | null }>()\nconst emit = defineEmits<{ (e: 'select', n: any): void, (e: 'add-node', p: any): void, (e: 'accept-node', id: string): void, (e: 'forbid-node', id: string): void, (e: 'delete-node', id: string): void }>()\n\nconst relatedInput = ref('')\nfunction addRelated() { if (relatedInput.value && props.selectedNode) { emit('add-node', { label: relatedInput.value, parentId: props.selectedNode.id }); relatedInput.value = '' } }\nfunction getNodeColor(node: GraphNode) {\n    if (node.status === 'forbidden') return '#ef4444'\n    if (props.thinkingNodeId === node.id) return '#22c55e'\n    if (node.type === 'root') return '#f43f5e'\n    if (node.status === 'accepted') return '#3b82f6'\n    return '#71717a'\n}\n\nconst hasAspects = computed(() => props.selectedNode && Object.keys(props.selectedNode.aspects || {}).length > 0);\n\nconst outgoingLinks = computed(() => {\n    if (!props.selectedNode) return []\n    return props.data.links\n        .filter(l => l.source === props.selectedNode!.id)\n        .map(l => ({ node: props.data.nodes.find(n => n.id === l.target), type: l.relationType }))\n        .filter((n): n is { node: GraphNode, type?: string } => !!n.node)\n})\n\nconst incomingLinks = computed(() => {\n    if (!props.selectedNode) return []\n    return props.data.links\n        .filter(l => l.target === props.selectedNode!.id)\n        .map(l => ({ node: props.data.nodes.find(n => n.id === l.source), type: l.relationType }))\n        .filter((n): n is { node: GraphNode, type?: string } => !!n.node)\n})\n</script>"
    },
    {
      "filename": "src/components/InitialOnboarding.vue",
      "content": "<template>\n  <div class=\"bg-zinc-900 border border-zinc-800 p-8 rounded-2xl shadow-2xl w-full max-w-lg\">\n    <!-- Step 1: Concept -->\n    <div v-if=\"step === 1\">\n      <h2 class=\"text-xl font-bold text-white mb-2 text-center\">Start Exploration</h2>\n      <p class=\"text-zinc-500 text-sm mb-6 text-center\">What concept do you want to explore with AI today?</p>\n      <input \n        v-model=\"concept\"\n        @keyup.enter=\"fetchAspects\"\n        placeholder=\"e.g. Cyberpunk, Ancient Rome, Coffee...\"\n        class=\"w-full bg-zinc-950 border border-zinc-800 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-indigo-500 transition-all\"\n        autofocus\n      />\n      <button \n        @click=\"fetchAspects\" \n        :disabled=\"!concept || loading\"\n        class=\"mt-4 w-full bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 transition-all\"\n      >\n        <span v-if=\"loading\" class=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\"></span>\n        {{ loading ? 'Analyzing...' : 'Continue' }}\n      </button>\n    </div>\n\n    <!-- Step 2: Aspects -->\n    <div v-else-if=\"step === 2\">\n      <h2 class=\"text-xl font-bold text-white mb-1 text-center\">Define Perspectives</h2>\n      <p class=\"text-zinc-500 text-xs mb-6 text-center\">Select which semantic dimensions the AI should consider.</p>\n      \n      <div class=\"flex flex-wrap gap-2 mb-6 justify-center\">\n        <div \n          v-for=\"a in suggestions\" \n          :key=\"a\"\n          @click=\"toggleAspect(a)\"\n          class=\"px-3 py-1.5 rounded-lg text-[11px] font-bold uppercase tracking-wider cursor-pointer transition-all border\"\n          :class=\"selectedAspects.includes(a) \n            ? 'bg-indigo-600 border-indigo-500 text-white shadow-lg' \n            : 'bg-zinc-800 border-zinc-700 text-zinc-500 hover:text-zinc-300'\"\n        >\n          {{ a }}\n        </div>\n        \n        <div class=\"w-full flex mt-2\">\n          <input \n            v-model=\"customAspect\"\n            @keyup.enter=\"addCustomAspect\"\n            placeholder=\"Add custom aspect...\"\n            class=\"flex-1 bg-zinc-950 border border-zinc-800 border-r-0 rounded-l-lg px-3 py-2 text-xs text-white focus:outline-none\"\n          />\n          <button @click=\"addCustomAspect\" class=\"bg-zinc-800 border border-zinc-800 border-l-0 rounded-r-lg px-3 text-zinc-400 hover:text-white\">\n            +\n          </button>\n        </div>\n      </div>\n\n      <div class=\"flex gap-3\">\n        <button @click=\"step = 1\" class=\"flex-1 bg-zinc-800 hover:bg-zinc-700 text-zinc-400 py-2.5 rounded-lg font-bold\">Back</button>\n        <button @click=\"start\" class=\"flex-[2] bg-indigo-600 hover:bg-indigo-500 text-white py-2.5 rounded-lg font-bold shadow-lg shadow-indigo-900/20\">Begin Exploration</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from 'vue';\n\nconst props = defineProps<{ ws: WebSocket | null }>();\nconst emit = defineEmits<{ (e: 'start', payload: { label: string, aspects: string[] }): void }>();\n\nconst step = ref(1);\nconst concept = ref('');\nconst loading = ref(false);\nconst suggestions = ref<string[]>([]);\nconst selectedAspects = ref<string[]>(['Technical', 'Emotional']);\nconst customAspect = ref('');\n\nfunction fetchAspects() {\n  if (!concept.value || !props.ws) return;\n  loading.value = true;\n  props.ws.send(JSON.stringify({ type: 'SUGGEST_ASPECTS', label: concept.value }));\n  \n  const handler = (e: MessageEvent) => {\n    const data = JSON.parse(e.data);\n    if (data.type === 'ASPECT_SUGGESTIONS') {\n      suggestions.value = data.suggestions;\n      selectedAspects.value = data.suggestions.slice(0, 4);\n      loading.value = false;\n      step.value = 2;\n      props.ws?.removeEventListener('message', handler);\n    }\n  };\n  props.ws.addEventListener('message', handler);\n}\n\nfunction toggleAspect(a: string) {\n  if (selectedAspects.value.includes(a)) selectedAspects.value = selectedAspects.value.filter(i => i !== a);\n  else selectedAspects.value.push(a);\n}\n\nfunction addCustomAspect() {\n  if (!customAspect.value) return;\n  if (!suggestions.value.includes(customAspect.value)) suggestions.value.push(customAspect.value);\n  if (!selectedAspects.value.includes(customAspect.value)) selectedAspects.value.push(customAspect.value);\n  customAspect.value = '';\n}\n\nfunction start() {\n  emit('start', { label: concept.value, aspects: selectedAspects.value });\n}\n</script>"
    },
    {
      "filename": "src/components/NodeIcon.vue",
      "content": "<template>\n  <svg viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"inline-block shrink-0\">\n    <!-- File: Sphere -> Circle -->\n    <circle v-if=\"type === 'file'\" cx=\"12\" cy=\"12\" r=\"8\" :fill=\"fillColor\" stroke=\"currentColor\" stroke-width=\"2\" stroke-opacity=\"0.2\" />\n    \n    <!-- Class: Box -> Square -->\n    <rect v-else-if=\"type === 'class'\" x=\"5\" y=\"5\" width=\"14\" height=\"14\" rx=\"2\" :fill=\"fillColor\" stroke=\"currentColor\" stroke-width=\"2\" stroke-opacity=\"0.2\" />\n    \n    <!-- Function: Cone -> Triangle -->\n    <path v-else-if=\"type === 'function'\" d=\"M12 3L21 20H3L12 3Z\" :fill=\"fillColor\" stroke=\"currentColor\" stroke-width=\"2\" stroke-opacity=\"0.2\" />\n    \n    <!-- Cluster (Default) -->\n    <g v-else>\n       <circle cx=\"8\" cy=\"8\" r=\"4\" :fill=\"fillColor\" opacity=\"0.9\" />\n       <circle cx=\"16\" cy=\"16\" r=\"4\" :fill=\"fillColor\" opacity=\"0.7\" />\n       <circle cx=\"16\" cy=\"8\" r=\"4\" :fill=\"fillColor\" opacity=\"0.8\" />\n       <circle cx=\"8\" cy=\"16\" r=\"4\" :fill=\"fillColor\" opacity=\"0.6\" />\n    </g>\n  </svg>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from 'vue'\n\nconst props = defineProps<{\n  type: string\n  color?: string\n}>()\n\nconst fillColor = computed(() => props.color || 'currentColor')\n</script>\n"
    },
    {
      "filename": "src/main.ts",
      "content": "import { createApp } from 'vue'\nimport { createPinia } from 'pinia'\nimport piniaPluginPersistedstate from 'pinia-plugin-persistedstate'\nimport './style.css'\nimport App from './App.vue'\n\nconst pinia = createPinia()\npinia.use(piniaPluginPersistedstate)\n\nconst app = createApp(App)\napp.use(pinia)\napp.mount('#app')\n"
    },
    {
      "filename": "src/stores/graphConfig.ts",
      "content": "import { defineStore } from \"pinia\";\nimport { ref } from \"vue\";\n\nexport const useGraphConfigStore = defineStore(\n\t\"graphConfig\",\n\t() => {\n\t\t// Appearance\n\t\tconst backgroundColor = ref(\"#19191d\");\n\t\tconst nodeColor = ref(\"#cccccc\");\n\t\tconst linkColor = ref(\"#555555\");\n\n\t\t// Physics & Layout\n\t\tconst nodeRelSize = ref(1); // Multiplier for node sphere size\n\t\tconst linkWidth = ref(0.5);\n\t\tconst linkOpacity = ref(0.5);\n\t\tconst linkDirectionalParticles = ref(0);\n\t\tconst linkDirectionalParticleSpeed = ref(0.005);\n\t\tconst labelVisibleDistance = ref(10000); // Effectivly infinite\n\n\t\t// Forces\n\t\tconst chargeStrength = ref(-100);\n\t\tconst distanceMax = ref(400);\n\n\t\t// Engine & Advanced\n\t\tconst forceEngine = ref<\"d3\" | \"ngraph\">(\"d3\");\n\t\tconst numDimensions = ref<1 | 2 | 3>(3);\n\t\tconst dagMode = ref<string>(\"null\"); // 'null', 'td', 'bu', 'lr', 'rl', 'zout', 'zin', 'radialout', 'radialin'\n\t\tconst dagLevelDistance = ref(50);\n\t\tconst warmupTicks = ref(0);\n\t\tconst cooldownTicks = ref(15000); // -1 for infinite\n\n\t\tfunction reset() {\n\t\t\tbackgroundColor.value = \"#19191d\";\n\t\t\tnodeRelSize.value = 4;\n\t\t\tlinkWidth.value = 0.5;\n\t\t\tlinkOpacity.value = 0.5;\n\t\t\tlinkDirectionalParticles.value = 0;\n\t\t\tchargeStrength.value = -100;\n\t\t\tforceEngine.value = \"d3\";\n\t\t\tnumDimensions.value = 3;\n\t\t\tdagMode.value = \"null\";\n\t\t\tdagLevelDistance.value = 50;\n\t\t\twarmupTicks.value = 0;\n\t\t\tcooldownTicks.value = 15000;\n\t\t}\n\n\t\treturn {\n\t\t\tbackgroundColor,\n\t\t\tnodeColor,\n\t\t\tlinkColor,\n\t\t\tnodeRelSize,\n\t\t\tlinkWidth,\n\t\t\tlinkOpacity,\n\t\t\tlinkDirectionalParticles,\n\t\t\tlinkDirectionalParticleSpeed,\n\t\t\tchargeStrength,\n\t\t\tdistanceMax,\n\t\t\tforceEngine,\n\t\t\tnumDimensions,\n\t\t\tdagMode,\n\t\t\tdagLevelDistance,\n\t\t\twarmupTicks,\n\t\t\tcooldownTicks,\n\t\t\treset,\n\t\t};\n\t},\n\t{\n\t\tpersist: true,\n\t},\n);\n"
    },
    {
      "filename": "src/style.css",
      "content": "@import \"tailwindcss\";\n\n:root {\n\tbackground-color: #19191d;\n\tcolor: #ffffff;\n}\n\nbody {\n\tmargin: 0;\n\tpadding: 0;\n\toverflow: hidden;\n\twidth: 100vw;\n\theight: 100vh;\n}\n\n#app {\n\twidth: 100%;\n\theight: 100%;\n}\n"
    },
    {
      "filename": "src/types/graph.ts",
      "content": "export type NodeStatus = 'proposed' | 'accepted' | 'forbidden';\n\nexport interface GraphNode {\n  id: string;\n  label: string;\n  status: NodeStatus;\n  type: 'concept' | 'root';\n  val: number;\n  aspects: Record<string, number>;\n  group?: number;\n  metadata?: {\n    reason?: string;\n    timestamp: number;\n  };\n  // Physics\n  x?: number;\n  y?: number;\n  z?: number;\n  fx?: number | null;\n  fy?: number | null;\n  fz?: number | null;\n  isLocked?: boolean;\n  // Computed properties (client-side)\n  neighbors?: GraphNode[];\n  links?: GraphLink[];\n  __threeObj?: any;\n}\n\nexport interface GraphLink {\n  source: string;\n  target: string;\n  type: 'ai' | 'user' | 'bridge';\n  relationType?: string;\n  explanation?: string;\n  id?: string;\n}\n\nexport interface GraphState {\n  nodes: Record<string, GraphNode>;\n  links: GraphLink[];\n  focusNodeId: string | null;\n  thinkingNodeId: string | null;\n  settings: {\n    creativity: number;\n    maxWords: number;\n    minConnections: number;\n    autoExplore: boolean;\n    definedAspects: string[];\n    activeAspects: string[];\n  };\n}\n\nexport interface GraphData {\n  nodes: GraphNode[];\n  links: GraphLink[];\n  settings?: GraphState['settings'];\n}"
    }
  ]
}